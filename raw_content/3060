<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--

	Liberating taste.
	
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
	<title>Wunderbuzz mixtape #1</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="robots" content="noindex, nofollow" />
	<link rel="stylesheet" type="text/css" href="/mixtape/1/res/tape.css" />
	<link rel="alternate" type="application/rss+xml" href="/mixtape/1/code/rss.php" />
	<style type="text/css">
		div.banner { background: #000; }									
	</style>
		
	<script type="text/javascript" src="/mixtape/1/res/mootools.js"></script>
	<script type="text/javascript" src="/mixtape/1/res/swfobject.js"></script>
	<script type="text/javascript">
		if(!navigator.userAgent.match(/iPhone|iPod/i)) {			
			var flashvars = {
				type: "xml",
				shuffle: "false",
				repeat: "list",
				file: "http://wunderbuzz.co.uk/mixtape/1/code/xspf.php?5356761c6c1493bb993919e70a73370e"		
			}
			var params = {
				allowscriptaccess: "always"
			}
			var attributes = {
			  id: "openplayer",
			  name: "openplayer",
			  styleclass: "flash_player"
			}
			swfobject.embedSWF('http://wunderbuzz.co.uk/mixtape/1/res/mediaplayer.swf', "openplayer", "0", "0", "8.0.0", false, flashvars, params, attributes);
		}
	 </script>
	</head>
	
	<body>
		<div class="container">
			<div class="banner">
				<div class="flag">
					<h1>Wunderbuzz mixtape #1</h1>
					<h2><a href="http://wunderbuzz.co.uk/" target="_blank">Home</a> <div id="sort">Mixtape#1</div></h2>
					
				</div>
			</div>
										
						
			<ul class="songs">
			<li class="song" id="song0">
			<div class="name">
				The Rumour Said Fire - Evil Son			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>4:56</strong>
			</div>
			
		</li>
			<li class="song" id="song1">
			<div class="name">
				Kate Bush - Running Up That Hill			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>4:51</strong>
			</div>
			
		</li>
			<li class="song" id="song2">
			<div class="name">
				The Streets - I Love You More (Than You Like Me)			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>3:45</strong>
			</div>
			
		</li>
			<li class="song" id="song3">
			<div class="name">
				David Bowie - Absolute Beginners			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>5:40</strong>
			</div>
			
		</li>
			<li class="song" id="song4">
			<div class="name">
				The Rolling Stones - Play With Fire			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>2:12</strong>
			</div>
			
		</li>
			<li class="song" id="song5">
			<div class="name">
				Louis Armstrong - Hello Dolly			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>2:30</strong>
			</div>
			
		</li>
			<li class="song" id="song6">
			<div class="name">
				Feist - Mushaboom			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>3:45</strong>
			</div>
			
		</li>
			<li class="song" id="song7">
			<div class="name">
				Charlotte Gainsbourg - Greenwich Mean Time			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>2:25</strong>
			</div>
			
		</li>
			<li class="song" id="song8">
			<div class="name">
				The Doors - The Spy			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>4:18</strong>
			</div>
			
		</li>
			<li class="song" id="song9">
			<div class="name">
				Bob Dylan - Just Like A Woman			</div>

						&nbsp;
			
			<div class="info">
			<div class="clock"></div> <strong>4:54</strong>
			</div>
			
		</li>
	</ul>				
		
		<div class="footer">
			This is <a href="http://opentape.fm">Opentape 0.12</a>. &infin; <a href="/mixtape/1/code/edit.php">Admin</a>
		</div>
		
		<div id="openplayer" class="flash_player"></div>
		
		</div>
		
	<script type="text/javascript">
		
		var openPlaylist=new Array();
		openPlaylist.push('VGhlJTIwUnVtb3VyJTIwU2FpZCUyMEZpcmUlMjAtJTIwRXZpbCUyMFNvbi5tcDM','MDElMjBSdW5uaW5nJTIwVXAlMjBUaGF0JTIwSGlsbC5tcDM','MDMlMjBJJTIwTG92ZSUyMFlvdSUyME1vcmUlMjAlMjhUaGFuJTIwWW91JTIwTGlrZSUyME1lJTI5Lm1wMw','MTMlMjBBYnNvbHV0ZSUyMEJlZ2lubmVycy5tcDM','XzE4JTIwLSUyMFBsYXklMjBXaXRoJTIwRmlyZS5tcDM','MDYlMjAtJTIwSGVsbG8lMjBEb2xseS5tcDM','MDIlMjBNdXNoYWJvb20ubXAz','R3JlZW53aWNoJTIwTWVhbiUyMFRpbWUubXAz','MDglMjBUaGUlMjBTcHkubXAz','SnVzdCUyMExpa2UlMjBBJTIwV29tYW4ubXAz');
			
		// assign all the right events
		for(i = 0; i < openPlaylist.length; i++) {
			var trackEntry = $('song'+i);
			if(trackEntry) {
			
				trackEntry.addEvent('mouseover',function() {
					trackEntry.addClass('hover');
				});
				
				trackEntry.addEvent('mouseout',function() {
					trackEntry.removeClass('hover');
				});
				
		
				trackEntry.addEvent('click',function(e) {
						targ = e.target || e.srcElement;
						// because of the numerous subelements one can click, we need to do this ugly thing
						if (targ.id.indexOf("song")!=-1) { togglePlayback(targ.id); }
						else if (targ.parentNode.id.indexOf("song")!=-1) { togglePlayback(targ.parentNode.id); }
						else if (targ.parentNode.parentNode.id.indexOf("song")!=-1) { togglePlayback(targ.parentNode.parentNode.id); }
						else if (targ.parentNode.parentNode.parentNode.id.indexOf("song")!=-1) { togglePlayback(targ.parentNode.parentNode.parentNode.id); }
				});
				
				
			}
		}	
	
		// Player management code //
	
		var currentTrack = 0;
		var isReady = 0;
		var playerStatus = "";
		var currentPos;
		var player;
		
		function playerReady(obj) {
			var id = obj['id'];
			var version = obj['version'];
			var client = obj['client'];
			isReady = 1;
			sendEvent('ITEM',currentTrack); // sets the playback to item 0
			player = document.getElementById(id);
			player.addModelListener('STATE','updatePlayerState');
			player.addModelListener('TIME','updateCurrentPos');
			player.addControllerListener('ITEM','updateCurrentTrack');
		}
		
		function updatePlayerState(obj) {
			playerStatus = obj['newstate'];
			//console.log("status: " + obj['newstate'] + " currentTrack: " + currentTrack);
		}
		
		
		function updateCurrentTrack(obj) {
			cleanTrackDisplay(currentTrack);
			currentTrack = obj['index'];
			setupTrackDisplay(obj['index']);
			//console.log("currentTrack changed to: " + obj['index']);
		}

		
		function updateCurrentPos(obj) {
			pos = Math.round(obj['position']);
			if ( pos==currentPos ) { return false; }
			else {
				var string = '';
				var sec = pos % 60;
				var min = (pos - sec) / 60;
				var min_formatted = min ? min+':' : '';
				var sec_formatted = min ? (sec < 10 ? '0'+sec : sec) : sec;
				string = min_formatted + sec_formatted;
			
				songClock.setHTML(string);
				currentPos = pos;
			}
		
		}
		
		function playTrack() {
				//console.log("Executing playTrack: " + currentTrack);
				setupTrackDisplay(currentTrack);
				sendEvent('ITEM',currentTrack);
				sendEvent('PLAY',true);
		}
	
		function stopTrack() {
			sendEvent('STOP');
			cleanTrackDisplay(currentTrack);
		}
		
		function cleanTrackDisplay(id) {
			//console.log("Executing cleanTrackDisplay: " + id);

			songClock = $E('#song'+id+' .clock');
			songItem = $E('#song'+id);

			songItem.removeClass('hilite');		
			songClock.setHTML('');
		}
		
		function setupTrackDisplay(id) {
			//console.log("Executing setupTrackDisplay: " + id);

			songClock = $E('#song'+id+' .clock');
			songItem = $E('#song'+id);
		
			songClock.removeClass('grey');
			songClock.addClass('green');
			songClock.setHTML('&mdash;');
			songItem.addClass('hilite');
						
			var name = $E('#song'+ id +' .name').getHTML().replace('&amp;','&');
			document.title = name.trim() + " / Wunderbuzz mixtape #1";		
		}
	
		function togglePlayback(id) {
			id = id.replace(/song/,'');
			songClock = $E('#song'+currentTrack+' .clock');
			// songItem = $E('#song'+currentTrack); 
			// console.log("togglePlayback called with: " + id + " currentTrack is: " + currentTrack);
			
			if (id == currentTrack || id == null) { 
				if(playerStatus == "PAUSED"|| playerStatus=="IDLE") {
					songClock.removeClass('grey');
					songClock.addClass('green');
					sendEvent('PLAY', true);
				} else {
					songClock.removeClass('green');
					songClock.addClass('grey');	
					sendEvent('PLAY', false);
				}
			} else {
				stopTrack();
				currentTrack = id;
				playTrack();
			}
		}
		
		// Player maintenance functions
		function sendEvent(typ,prm) { 
			if( isReady ) {	thisMovie('openplayer').sendEvent(typ,prm); }
		}

		function thisMovie(movieName) {
			if(navigator.appName.indexOf("Microsoft") != -1) { return window[movieName]; }
			else { return document[movieName]; }
		}
		
	</script>
				
	</body>
</html>
